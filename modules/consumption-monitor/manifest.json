{
  "name": "consumption-monitor",
  "version": "1.0.0",
  "displayName": "Consumption Monitor",
  "description": "Automated power consumption monitoring for colocation racks - scrapes power meters, tracks kWh usage, generates reports and alerts",
  "author": "NxForge",
  "license": "MIT",
  "entry": "./src/index.ts",
  "jobs": {
    "collect-consumption": {
      "name": "Collect Consumption Data",
      "description": "Scrapes power meters and collects kWh consumption data from all enabled rack endpoints",
      "handler": "./src/jobs/collect-consumption.ts",
      "schedule": null,
      "timeout": 300000,
      "retries": 2,
      "config": {
        "batchSize": {
          "type": "number",
          "label": "Batch Size",
          "description": "Number of endpoints to process concurrently",
          "default": 5,
          "required": false
        },
        "screenshotOnError": {
          "type": "boolean",
          "label": "Screenshot on Error",
          "description": "Capture screenshot when scraping fails (for debugging)",
          "default": true,
          "required": false
        }
      }
    }
  },
  "migrations": "./src/migrations",
  "contributions": {
    "dashboard": {
      "widgets": [
        {
          "id": "live-power",
          "title": "Live Power Usage",
          "component": "./components/LivePowerWidget",
          "size": "medium",
          "refreshInterval": 5000
        }
      ]
    },
    "navigation": {
      "category": "power",
      "items": [
        {
          "label": "Live Dashboard",
          "path": "/modules/consumption/live"
        },
        {
          "label": "Endpoints",
          "path": "/modules/consumption/endpoints"
        },
        {
          "label": "Reports",
          "path": "/modules/consumption/reports"
        },
        {
          "label": "History",
          "path": "/modules/consumption/history"
        }
      ]
    }
  },
  "ui": {
    "entry": "./dist/ui/index.js",
    "sidebar": {
      "icon": "âš¡",
      "label": "Consumption",
      "order": 20,
      "children": [
        {
          "label": "Live Dashboard",
          "path": "/modules/consumption/live"
        },
        {
          "label": "Endpoints",
          "path": "/modules/consumption/endpoints"
        },
        {
          "label": "Reports",
          "path": "/modules/consumption/reports"
        },
        {
          "label": "History",
          "path": "/modules/consumption/history"
        }
      ]
    },
    "routes": [
      {
        "path": "/modules/consumption/live",
        "component": "./ui/pages/LiveDashboard.tsx"
      },
      {
        "path": "/modules/consumption/endpoints",
        "component": "./ui/pages/Endpoints.tsx"
      },
      {
        "path": "/modules/consumption/reports",
        "component": "./ui/pages/Reports.tsx"
      },
      {
        "path": "/modules/consumption/history",
        "component": "./ui/pages/History.tsx"
      }
    ]
  },
  "permissions": [
    "database:read",
    "database:write",
    "network:outbound",
    "filesystem:write"
  ],
  "dependencies": {},
  "settings": {
    "defaultBatchSize": {
      "type": "number",
      "label": "Default Batch Size",
      "description": "Default number of endpoints to process concurrently",
      "default": 5,
      "required": false
    },
    "screenshotDirectory": {
      "type": "string",
      "label": "Screenshot Directory",
      "description": "Directory to store error screenshots",
      "default": "screenshots",
      "required": false
    },
    "retentionDays": {
      "type": "number",
      "label": "Data Retention (Days)",
      "description": "Number of days to retain consumption readings",
      "default": 365,
      "required": false
    }
  }
}